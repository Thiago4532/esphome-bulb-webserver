var Y=e=>{throw TypeError(e)};var W=(e,t,r)=>t.has(e)||Y("Cannot "+r);var s=(e,t,r)=>(W(e,t,"read from private field"),r?r.call(e):t.get(e)),f=(e,t,r)=>t.has(e)?Y("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),a=(e,t,r,n)=>(W(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),j=(e,t,r)=>(W(e,t,"access private method"),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();const z=String.raw,Q=z`
<div id="app">
  <div class="container">
    <input type="range" id="brightness-slider" min="0.0" max="1.0" value="0.5" step="0.004" disabled>
    <div class="value">Brightness: <span id="brightness-label"></span></div>
  </div>
  <div class="container">
    <input type="range" id="temperature-slider" min="0.0" max="1.0" value="0.5" step="0.004" disabled>
    <div class="value">Temperature: <span id="temperature-label"></span></div>
    <button id="power-button" disabled>Turn On</button>
  </div>
  <div class="container">
    <canvas id="color-wheel" width="300" height="300"></canvas>
    <div id="color-display">RGB: (1.00, 0.00, 0.00)</div>
  </div>
</div>
`;document.body.innerHTML=Q;const J=500,A="";function L(e){if(!Number.isInteger(e))return null;const t=new ArrayBuffer(4);return new DataView(t).setUint32(0,e,!0),new DataView(t).getFloat32(0,!0)}function v(e,t,r){return Math.min(Math.max(e,t),r)}function Z(e,t){if(!e)throw new Error(t)}var B,M,d,I,g,w,x,D,F,G;const X=class X{constructor(t){f(this,F);f(this,B);f(this,M);f(this,d);f(this,I);f(this,g);f(this,w);f(this,x);f(this,D);var r,n,o;a(this,B,t.state??!1),a(this,d,{r:L((r=t.color)==null?void 0:r.r)??1,g:L((n=t.color)==null?void 0:n.g)??1,b:L((o=t.color)==null?void 0:o.b)??1}),a(this,I,L(t.brightness)??1),a(this,g,t.color_mode??"color_temp"),a(this,w,L(t.min_color_temp)??0),a(this,x,L(t.max_color_temp)??0),a(this,M,L(t.color_temp)??(s(this,w)+s(this,x))/2),Z(s(this,w)<=s(this,x),"Min color temperature must be less than or equal to max color temperature"),a(this,D,null)}get state(){return s(this,B)}set state(t){a(this,B,!!t)}get color_temp(){return s(this,M)}set color_temp(t){a(this,M,v(t,s(this,w),s(this,x))),a(this,g,"color_temp")}get red(){return s(this,d).r}set red(t){s(this,d).r=v(t,0,1),a(this,g,"rgb")}get green(){return s(this,d).g}set green(t){s(this,d).g=v(t,0,1),a(this,g,"rgb")}get blue(){return s(this,d).b}set blue(t){s(this,d).b=v(t,0,1),a(this,g,"rgb")}setColor(t,r,n){s(this,d).r=v(t,0,1),s(this,d).g=v(r,0,1),s(this,d).b=v(n,0,1),a(this,g,"rgb")}get brightness(){return s(this,I)}set brightness(t){a(this,I,v(t,0,1))}get color_mode(){return s(this,g)}set color_mode(t){t==="color_temp"||t==="rgb"?a(this,g,t):console.log("Unknown color mode:",t)}get min_color_temp(){return s(this,w)}get max_color_temp(){return s(this,x)}static async fetch(){const r=await(await fetch(`${A}/light/rgbcct_bulb/dump`)).json();return new X(r)}async debounce(){clearTimeout(s(this,D)),a(this,D,setTimeout(()=>{j(this,F,G).call(this)},J))}};B=new WeakMap,M=new WeakMap,d=new WeakMap,I=new WeakMap,g=new WeakMap,w=new WeakMap,x=new WeakMap,D=new WeakMap,F=new WeakSet,G=async function(){if(!s(this,B)){try{await fetch(`${A}/light/rgbcct_bulb/turn_off`,{method:"POST"}),console.log("Light state:",this)}catch(n){console.error("Failed to update light state:",n)}return}const t={};t.brightness=s(this,I)*255,s(this,g)==="color_temp"?t.color_temp=s(this,M):s(this,g)==="rgb"&&(t.r=s(this,d).r*255,t.g=s(this,d).g*255,t.b=s(this,d).b*255);const r=new URLSearchParams(t).toString();console.log("Query string:",r);try{await fetch(`${A}/light/rgbcct_bulb/turn_on?`+r,{method:"POST"}),console.log("Light state:",this)}catch(n){console.error("Failed to update light state:",n)}};let $=X,l;const O={slider:document.getElementById("brightness-slider"),label:document.getElementById("brightness-label")},T={slider:document.getElementById("temperature-slider"),label:document.getElementById("temperature-label")},q=document.getElementById("power-button");O.slider.disabled=!0;T.slider.disabled=!0;q.disabled=!0;const y=document.getElementById("color-wheel"),C=y.getContext("2d"),k=document.getElementById("color-display"),_=300,h=_/2;y.width=y.height=_;y.style.width=y.style.height=_+"px";let S=null,V=null;function H(e,t,r){let n=(e*180/Math.PI%360+360)%360,o=t,i=r,c=i*o,m=c*(1-Math.abs(n/60%2-1)),E=i-c,p,b,u;n<60?(p=c,b=m,u=0):n<120?(p=m,b=c,u=0):n<180?(p=0,b=c,u=m):n<240?(p=0,b=m,u=c):n<300?(p=m,b=0,u=c):(p=c,b=0,u=m);const N=p+E,P=b+E,U=u+E;return{r:N,g:P,b:U}}function tt(){const e=C.getImageData(0,0,_,_),t=e.data;for(let r=0;r<_;r++)for(let n=0;n<_;n++){const o=n-h,i=r-h,c=Math.sqrt(o*o+i*i);if(c<=h){const m=Math.atan2(i,o),{r:E,g:p,b}=H(m,c/h,V),u=(r*_+n)*4;t[u]=E*255,t[u+1]=p*255,t[u+2]=b*255,t[u+3]=255}}C.putImageData(e,0,0)}function R(e=!1){O.slider.disabled=!l.state,O.slider.value=l.brightness,O.label.textContent=(l.brightness*100).toFixed(2),T.slider.disabled=!l.state,T.slider.value=1-(l.color_temp-l.min_color_temp)/(l.max_color_temp-l.min_color_temp),T.label.textContent=(1e6/l.color_temp).toFixed(2)+"K",q.textContent=l.state?"Turn Off":"Turn On";const t=l.state;(S!==t||S&&V!==l.brightness)&&(S=t,V=l.brightness,C.clearRect(0,0,_,_),S?(y.style.pointerEvents="auto",tt()):(C.fillStyle="rgba(100, 100, 100, 0.5)",C.beginPath(),C.arc(h,h,h,0,2*Math.PI),C.fill())),e||l.debounce()}O.slider.addEventListener("input",()=>{l.brightness=O.slider.value,R()});T.slider.addEventListener("input",()=>{l.color_temp=l.min_color_temp+(1-T.slider.value)*(l.max_color_temp-l.min_color_temp),R()});q.addEventListener("click",()=>{l.state=!l.state,R()});y.addEventListener("pointerdown",e=>{{const o=y.getBoundingClientRect();let i=e.clientX-o.left-h,c=e.clientY-o.top-h;if(Math.sqrt(i*i+c*c)>h)return}const t=o=>{const i=y.getBoundingClientRect();let c=o.clientX-i.left-h,m=o.clientY-i.top-h;const E=Math.min(Math.sqrt(c*c+m*m),h),p=Math.atan2(m,c),{r:b,g:u,b:N}=H(p,E/h,1),P=[b,u,N],U=`RGB: (${P.map(K=>K.toFixed(2)).join(", ")})`;k.textContent=U,l.setColor(P[0],P[1],P[2]),R()},r=o=>{o.preventDefault(),t(o)},n=()=>{document.removeEventListener("pointermove",r),document.removeEventListener("pointerup",n)};document.addEventListener("pointermove",r),document.addEventListener("pointerup",n),t(e)});$.fetch().then(e=>{l=e,q.disabled=!1,R(!0)});
